{% extends 'base.html' %}

{% block content %}





<div class="dropright show">
    <a class="btn-lg btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Add Items
    </a>
    
    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        <a class="dropdown-item" href="#">Add Film</a>
        <a class="dropdown-item" href="#">Add TV</a>
        <a class="dropdown-item" href="#">Add OAV</a>
    </div>
</div>
    
<div class="jumbotron">
    <h1 class="display-4">{{franchises_details.franchies_name}}</h1>
    <img src="{{franchises_details.thumb.url}}" class="rounded" style="height: 300px;" alt="">
    <hr class="my-4">    
    <div class="row">
        {% if franchises_details.film_type is True %}
            <div class="col-md-auto">
            <p>Films: {{franchises_details.film_num}}</p>
            </div>
        {% endif %}
        {% if franchises_details.tv_type is True %}
            <div class="col-md-auto">
            <p>Seasons: {{franchises_details.tv_num}}</p>
            </div>
        {% endif %}
        {% if franchises_details.oav_type is True %}
            <div class="col-md-auto">
            <p>OAV's: {{franchises_details.oav_num}}</p>
            </div>
        {% endif %}
    </div>
        <div class="row">
        {% if not franchises_user == none %}
            <div class="col-md-auto">
            <p>Average all users: {{franchises_user.user_opinion_average}}</p>
            </div>
        {% endif %}
        {% if franchises_user == none %}
            <div class="col-md-auto">
            <p>No one has rated this yet</p>
            </div>
        {% endif %}
    </div>
</div>

<script type="text/javascript">
var filmCompSelect = false;
var filmMainSelect = false;
var tvCompSelect = false;
var tvMainSelect = false;

function firstLoad() {
    {% for franchise_item_film in franchise_items_films %}
    document.getElementById('film_table_comp_{{forloop.counter}}').style.display = 'none';
    document.getElementById('film_table_comp_{{forloop.counter}}').class = '';
    {% endfor %}
    {% for franchise_item_tv in franchise_items_tvs %}
    document.getElementById('tv_table_comp_{{forloop.counter}}').style.display = 'none';
    document.getElementById('tv_table_comp_{{forloop.counter}}').class = '';
    {% endfor %}
}
function filmComp() {
    if (this.filmMainSelect === true) {

        if (this.filmCompSelect === true) {
            {% for franchise_item_film in franchise_items_films %}
            document.getElementById('film_table_comp_{{forloop.counter}}').style.display = 'none';
            document.getElementById('film_table_comp_{{forloop.counter}}').class = '';
            {% endfor %}
            this.filmCompSelect = false;
        } else {
            {% for franchise_item_film in franchise_items_films %}
            document.getElementById('film_table_comp_{{forloop.counter}}').style.display = 'block';
            document.getElementById('film_table_comp_{{forloop.counter}}').class = 'col';
            {% endfor %}
            this.filmCompSelect = true
        }

    } else {
        {% for franchise_item_film in franchise_items_films %}
        document.getElementById('film_table_comp_{{forloop.counter}}').style.display = 'none';
        document.getElementById('film_table_comp_{{forloop.counter}}').class = '';
        {% endfor %}
        this.filmCompSelect = false;
    }
}
function filmMain() {
    if (this.filmMainSelect === false) {
        this.filmMainSelect = true;
    } else {
        this.filmMainSelect = false;
        filmComp();

    }
}



function tvComp() {
    if (this.tvMainSelect === true) {

        if (this.tvCompSelect === true) {
            {% for franchise_item_tv in franchise_items_tvs %}
            document.getElementById('tv_table_comp_{{forloop.counter}}').style.display = 'none';
            document.getElementById('tv_table_comp_{{forloop.counter}}').class = '';
            {% endfor %}
            this.tvCompSelect = false;
        } else {
            {% for franchise_item_tv in franchise_items_tvs %}
            document.getElementById('tv_table_comp_{{forloop.counter}}').style.display = 'block';
            document.getElementById('tv_table_comp_{{forloop.counter}}').class = 'col';
            {% endfor %}
            this.tvCompSelect = true
        }

    } else {
        {% for franchise_item_tv in franchise_items_tvs %}
        document.getElementById('tv_table_comp_{{forloop.counter}}').style.display = 'none';
        document.getElementById('tv_table_comp_{{forloop.counter}}').class = '';
        {% endfor %}
        this.tvCompSelect = false;
    }
}
function tvMain() {
    if (this.tvMainSelect === false) {
        this.tvMainSelect = true;
    } else {
        this.tvMainSelect = false;
        tvComp();

    }
}



</script>

<body onload="firstLoad()">

{% if franchises_details.film_type is True %}
<div id="accordion">
    <div class="card">
        <div class="card-header" id="headingOne">
            <h5 class="mb-0">
                    <button class="btn btn-primary" data-toggle="collapse" href="#film_table" role="button"
                        aria-expanded="false" onclick="filmMain()">
                        Films: {{franchises_details.film_num}}
                    </button>
                    <button class="btn btn-primary" role="button" aria-expanded="false" onclick="filmComp()">
                        Select User to compar
                    </button>
                
            </h5>
        </div>
        <div class="row">
            {% for franchise_item_film in franchise_items_films %}
            <div class="col">
                <div id="film_table" class="collapse multi-collapse">
                    <div class="card-body">
                        {{user.username}}
                        <table class="table table-hover">
                            <thead class="table-primary">
                                <tr>
                                    <th scope="col">{{franchise_item_film.name}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Animation: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Music: 3/5</th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}

            {% for franchise_item_film in franchise_items_films %}
            <div class="col" id="film_table_comp_{{ forloop.counter }}">
                <div id="film_table" class="collapse multi-collapse">
                    <div class="card-body">
                        Diff User Name
                        <table class="table table-hover">
                            <thead class="table-warning">
                                <tr>
                                    <th scope="col">{{franchise_item_film.name}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Animation: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Music: 3/5</th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}

        </div>
    </div>
</div>
{% endif %}

{% if franchises_details.tv_type is True %}
<div id="accordion">
    <div class="card">
        <div class="card-header" id="headingOne">
            <h5 class="mb-0">
                    <button class="btn btn-primary" data-toggle="collapse" href="#tv_table" role="button"
                        aria-expanded="false" onclick="tvMain()">
                        Seasons: {{franchises_details.tv_num}}
                    </button>
                    <button class="btn btn-primary" role="button" aria-expanded="false" onclick="tvComp()">
                        Select User to compar
                    </button>
                
            </h5>
        </div>
        <div class="row">
            {% for franchise_items_tv in franchise_items_tvs %}
            <div class="col">
                <div id="tv_table" class="collapse multi-collapse">
                    <div class="card-body">
                        {{user.username}}
                        <table class="table table-hover">
                            <thead class="table-primary">
                                <tr>
                                    <th scope="col">{{franchise_items_tv.name}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Animation: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Music: 3/5</th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}

            {% for franchise_items_tv in franchise_items_tvs %}
            <div class="col" id="tv_table_comp_{{ forloop.counter }}">
                <div id="tv_table" class="collapse multi-collapse">
                    <div class="card-body">
                        Diff User Name
                        <table class="table table-hover">
                            <thead class="table-warning">
                                <tr>
                                    <th scope="col">{{franchise_items_tv.name}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Story: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Animation: 2/5</th>
                                </tr>
                                <tr>
                                    <th scope="col">Music: 3/5</th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}

        </div>
    </div>
</div>
{% endif %}



</body>
{% endblock %}